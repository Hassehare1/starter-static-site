<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Min f√∂rsta sida</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Defer s√§kerst√§ller att JS inte kan krascha renderingen -->
    <script defer>
      // K√∂rs f√∂rst n√§r DOM √§r redo
      document.addEventListener("DOMContentLoaded", () => {
        const out = document.getElementById("out");
        const btn = document.getElementById("ping");
        if (!out || !btn) return; // skydd mot null

        btn.addEventListener("click", async () => {
          out.textContent = "H√§mtar‚Ä¶";

          // F√∂rs√∂k 1: Quotable
          try {
            const r1 = await fetch("https://api.quotable.io/random?maxLength=120&ts=" + Date.now(), { cache: "no-store" });
            if (!r1.ok) throw new Error("Quotable: " + r1.status);
            const d1 = await r1.json();
            out.textContent = `‚Äú${d1.content}‚Äù ‚Äî ${d1.author}`;
            return;
          } catch {}

          // F√∂rs√∂k 2: DummyJSON
          try {
            const r2 = await fetch("https://dummyjson.com/quotes/random?ts=" + Date.now(), { cache: "no-store" });
            if (!r2.ok) throw new Error("DummyJSON: " + r2.status);
            const d2 = await r2.json();
            const q = d2.quote || (d2.quotes && d2.quotes[0]?.quote) || "Ok√§nt citat";
            const a = d2.author || (d2.quotes && d2.quotes[0]?.author) || "Ok√§nd";
            out.textContent = `‚Äú${q}‚Äù ‚Äî ${a}`;
            return;
          } catch {}

          // Lokal fallback
          const lokala = [
            "All kod √§r provisorisk tills den fungerar.",
            "Sm√• steg √§r snabbast i l√§ngden.",
            "G√∂r det enkelt f√∂rst, optimera sen."
          ];
          const a = ["Du", "Ok√§nd", "AI-kompisen"][Math.floor(Math.random()*3)];
          const q = lokala[Math.floor(Math.random()*lokala.length)];
          out.textContent = `‚Äú${q}‚Äù ‚Äî ${a}`;
        });
      });
    </script>
  </head>

  <body>
    <!-- Toppmeny -->
    <nav class="topnav">
      <a href="index.html">Hem</a>
      <a href="about.html">Om</a>
    </nav>

    <!-- Inneh√•ll -->
    <main>
      <h1>üöÄ Min f√∂rsta uppdaterade sida via GitHub och Vercel!</h1>
      <p>Den h√§r sidan √§r deployad automatiskt via GitHub.</p>
      <button id="ping">Klicka mig</button>
      <pre id="out">...</pre>
    </main>
  </body>
</html>
